---
title: 动态链接步骤
author: 小飞
date: 2020-11-21 01:17:52
tags: [动态链接, 链接器]
categories:
- 操作系统
---

# 动态链接步骤

## 动态链接器自举

动态链接器本身也是一个不依赖其他共享对象的共享对象，需要自举（bootstrap）

## 装载共享对象

将可执行文件和链接器自身的符号合并成全局符号表，开始寻找依赖对象。加载对象的过程可以看做图的遍历过程；新的共享对象加载进来之后，其符号将合并全局符号表；加载完毕之后，全局符号表将包含进程动态链接所需的全部符号。

## 重定位和初始化

链接器遍历可执行文件和共享对象的重定位表，将他们的GOT/PLT中每个需要重定位的位置进行修正。完成重定位之后，链接器执行`.init`段的代码，进行共享对象特有的初始化过程（例如C++里全局对象的构造函数）。

>  注：除了`.init` 段之外，共享对象还有可能有`.finit`段，当进程退出时会执行`.finit`段中的代码，可以用来实现类似于C++全局对象析构之类的操作。

## 转交控制权

完成所有动态链接工作之后，链接器将控制权转交给程序的入口函数开始执行。