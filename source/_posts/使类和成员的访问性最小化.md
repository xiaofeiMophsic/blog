---
title: 使类和成员的访问性最小化
author: 小飞
date: 2016-12-16 10:00:52
tags: [java, effective java]
categories:
- java
---
设计良好的模块通常具有高度的**封装**性。对于系统而言，模块之间通过公有API进行访问，模块的内部实现对彼此是透明的，一个模块并不需要知道其他模块的具体工作，模块的API和实现是隔离的。这个概念也称为**信息隐藏**，是软件设计的基本原则。
<!-- more -->
# 尽可能缩小类和成员的访问范围

1. 尽可能地使每个类或者成员不被外界访问。
2. 顶层类和接口，只有两种访问规则：`public` 和 `default`。
3. 类的成员变量决不能声明成 `public` 的。
4. 对于静态的公有常量，要么将其声明为基本类型，要么将其指向不可变对象的引用。
>Tip: 虽然用`final`声明的成员引用本身不能修改，但是其指向对象内部是可以被修改的，这可能会导致灾难性的后果。比如，将一个数组公开为 `final` 类型，或者访问返回数组的方法，本身就是错误的。比如 `public static final Thing[] VALUES = { ... }` ，这行代码本身就可能包含潜在bug。要修复这个问题，可以使用 `Collections.unmodifiableList(Arrays.asList(VALUES))`返回一个不可变数据结构，或者将其声明为 `private` ，并返回其备份。比如返回 `VALUES.clone()`。 
